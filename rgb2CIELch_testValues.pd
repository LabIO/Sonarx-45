#N canvas 349 77 850 690 10;
#X obj 80 182 rgb2XYZ;
#N canvas 35 87 542 525 XYZ2Lab 0;
#X obj 126 25 r XYZ3plet;
#X obj 31 311 expr 500 * ( $f1 - $f2 );
#X obj 354 318 expr 200 * ( $f1 - $f2 );
#X msg 271 20 8;
#X floatatom 325 79 5 0 0 0 - - -, f 5;
#X obj 256 50 pow 0.33333;
#X floatatom 385 72 5 0 0 0 - - -, f 5;
#X obj 341 31 expr pow($f1 \, 0.33333333);
#X obj 104 62 unpack f f f;
#X obj 112 126 r refX;
#X obj 250 135 r refZ;
#X obj 85 151 /;
#X obj 170 160 /;
#X obj 181 132 r refY;
#X obj 238 161 /;
#X text 233 348 L;
#X text 370 352 b;
#X text 30 361 a;
#X obj 222 451 pack f f f;
#X obj 219 422 f;
#X obj 283 419 f;
#X text 303 455 Lab triplet;
#X obj 223 478 s Lab3plet;
#X obj 242 379 t b f b;
#X obj 46 363 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 251 348 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 388 354 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 194 316 expr max(0 \, 116*$f1 - 16);
#X obj 214 279 t f f f;
#X floatatom 221 87 5 0 0 0 - - -, f 5;
#X floatatom 156 94 5 0 0 0 - - -, f 5;
#X floatatom 62 98 5 0 0 0 - - -, f 5;
#X floatatom 343 279 12 0 0 0 - - -, f 12;
#X obj 45 206 expr if ($f1>0.00885645 \, pow($f1 \, 0.33333333) \,
(903.3*$f1 + 16)/116 ) \; if ($f2>0.00885645 \, pow($f2 \, 0.33333333)
\, (903.3*$f2 + 16)/116 ) \; if ($f3>0.00885645 \, pow($f3 \, 0.33333333)
\, (903.3*$f3 + 16)/116 ) \;, f 75;
#X connect 0 0 8 0;
#X connect 1 0 23 0;
#X connect 1 0 24 0;
#X connect 2 0 20 1;
#X connect 2 0 26 0;
#X connect 3 0 5 0;
#X connect 3 0 7 0;
#X connect 7 0 4 0;
#X connect 7 0 6 0;
#X connect 8 0 11 0;
#X connect 8 0 31 0;
#X connect 8 1 12 0;
#X connect 8 1 30 0;
#X connect 8 2 14 0;
#X connect 8 2 29 0;
#X connect 9 0 11 1;
#X connect 10 0 14 1;
#X connect 11 0 33 0;
#X connect 12 0 33 1;
#X connect 13 0 12 1;
#X connect 14 0 33 2;
#X connect 18 0 22 0;
#X connect 19 0 18 0;
#X connect 20 0 18 2;
#X connect 23 0 19 0;
#X connect 23 1 18 1;
#X connect 23 2 20 0;
#X connect 27 0 19 1;
#X connect 27 0 25 0;
#X connect 28 0 1 1;
#X connect 28 1 27 0;
#X connect 28 2 2 0;
#X connect 33 0 1 0;
#X connect 33 1 28 0;
#X connect 33 1 32 0;
#X connect 33 2 2 1;
#X restore 73 220 pd XYZ2Lab;
#X obj 389 85 loadbang;
#X msg 352 111 \; refX 95.047 \; refY 100 \; refZ 108.883 \;;
#X msg 349 201 \; refX 94.811 \; refY 100 \; refZ 107.304 \;;
#X text 350 257 observer=10ยบ \; Illuminant=D65 \;;
#X text 340 169 observer=2ยบ \; Illuminant=D65 \;;
#N canvas 550 128 772 436 Lab2Lch 0;
#X obj 68 23 r Lab3plet;
#X obj 62 51 unpack f f f;
#X obj 327 192 atan2;
#X obj 322 145 f;
#X text 324 252 Hยบ;
#X text 471 83 PI = 3.14159;
#X text 46 51 L;
#X obj 101 175 expr sqrt( $f1*$f1 + $f2*$f2 );
#X text 111 193 C;
#X obj 62 377 pack f f f;
#X obj 104 334 f;
#X obj 246 265 t b b f;
#X obj 62 405 s Lch3plet;
#X obj 319 233 expr if ( $f1>0 \, $f1/3.14159265*180 \, 360-abs($f1)/3.14159265*180
), f 67;
#X obj 449 104 expr 4*atan(1);
#X floatatom 439 146 12 0 0 0 - - -, f 12;
#X obj 442 71 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 416 127 this calculates PI on the fly;
#X obj 277 96 t f f;
#X obj 120 92 t b f f;
#X connect 0 0 1 0;
#X connect 1 0 9 0;
#X connect 1 1 19 0;
#X connect 1 2 18 0;
#X connect 2 0 13 0;
#X connect 3 0 2 0;
#X connect 7 0 10 1;
#X connect 9 0 12 0;
#X connect 10 0 9 1;
#X connect 11 1 10 0;
#X connect 11 2 9 2;
#X connect 13 0 11 0;
#X connect 14 0 15 0;
#X connect 16 0 14 0;
#X connect 18 0 7 1;
#X connect 18 1 3 1;
#X connect 19 0 3 0;
#X connect 19 1 7 0;
#X connect 19 2 2 1;
#X restore 74 252 pd Lab2Lch;
#N canvas 1 55 860 302 XYZ2Lch 0;
#X obj 176 67 r CIE-u;
#X obj 300 67 r CIE-v;
#X obj 30 67 r CIE-L;
#X obj 29 97 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 299 94 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 176 96 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 173 140 expr sqrt( ($f1*$f1) + ($f2*$f2) );
#X text 134 181 C*uv;
#X obj 551 74 r CIE-u;
#X obj 495 74 r CIE-v;
#X text 463 177 H*uv;
#X obj 172 177 s CIE-Chv;
#X obj 509 176 s CIE-Huv;
#X obj 247 178 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 579 177 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X obj 179 120 f;
#X obj 280 115 t b f;
#X text 11 141 polar coordinates CIE-Lch;
#X obj 485 270 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 0 256;
#X text 590 271 H in radians;
#X obj 470 235 expr if ($f1>0 \, $f1/3.14159*180 \, 360-abs($f1)/3.14159*180)
;
#X obj 530 129 atan2;
#X obj 139 21 XYZ2CIELuv;
#X text 287 23 does not give correct values of Lch \, why?;
#X connect 0 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 4 0 16 0;
#X connect 5 0 15 1;
#X connect 6 0 11 0;
#X connect 6 0 13 0;
#X connect 8 0 21 1;
#X connect 9 0 21 0;
#X connect 15 0 6 0;
#X connect 16 0 15 0;
#X connect 16 1 6 1;
#X connect 20 0 18 0;
#X connect 21 0 12 0;
#X connect 21 0 20 0;
#X connect 21 0 14 0;
#X restore 632 50 pd XYZ2Lch;
#X obj 54 115 unpack f f f;
#X obj 75 279 r Lch3plet;
#X obj 62 150 * 255;
#X obj 100 149 * 255;
#X text 161 38 convert rgb 2 Lch from XYZ>Lab>Lch \; input values from
pix_data [0 \, 1];
#X obj 461 176 table testHvalues 1.65814e+07;
#X obj 461 152 table testCvalues 1.65814e+07;
#X obj 461 129 table testLvalues 1.65814e+07;
#X floatatom 440 372 12 0 0 0 - - -, f 12;
#X msg 439 331 1.65814e+07;
#X msg 372 464 \; testHvalues const 0 \; testCvalues const 0 \; testLvalues
const 0;
#X obj 535 229 vsl 15 128 0 1.65814e+07 0 0 empty empty empty 0 -9
0 10 -262144 -1 -1 0 1;
#X floatatom 446 429 12 0 0 0 - - -, f 12;
#X obj 278 597 rgbs_fromText;
#X obj 60 343 unpack f f f;
#X msg 335 529 \; rest 0;
#X msg 514 508 bang;
#X obj 514 600 unpack;
#X floatatom 477 623 0 0 0 0 minimum - -;
#X floatatom 539 642 12 0 0 3 idx - -, f 12;
#X obj 644 600 unpack;
#X floatatom 644 625 12 0 0 0 maximum - -, f 12;
#X floatatom 733 623 12 0 0 3 idx - -, f 12;
#X obj 514 576 tabminmax testLvalues;
#X msg 563 534 set testCvalues;
#X msg 564 556 set testHvalues;
#X obj 277 566 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 311 568 calcula;
#X obj 360 360 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 347 389 t b b b b;
#X obj 140 150 * 255;
#X obj 448 399 tabread testHvalues;
#X msg 563 507 set testLvalues;
#X obj 163 67 cnv 15 140 80 empty empty attenzione 20 12 0 14 -260097
-257985 0;
#X msg 186 116 1;
#X text 164 88 PARA O TESTE DO RANGE \; CLICK AQUI ANTES DE TUDO!!!
;
#X msg 604 317 \; testLvalues write textLvalues.txt \; testCvalues
write textCvalues.txt \; testHvalues write textHvalues.txt;
#X obj 608 256 r done;
#X obj 48 68 inlet rgb3plet;
#X obj 53 632 r Lch3plet;
#X obj 54 656 outlet;
#X obj 14 38 r rgb3plet;
#X obj 222 251 pack f f f;
#X floatatom 248 167 5 0 0 0 - - -, f 5;
#X floatatom 291 161 5 0 0 0 - - -, f 5;
#X floatatom 210 165 5 0 0 0 - - -, f 5;
#X obj 235 223 t b f;
#X obj 282 224 t b f;
#X obj 213 197 / 255;
#X obj 251 195 / 255;
#X obj 294 197 / 255;
#X obj 70 607 tabwrite testHvalues;
#X obj 8 503 tabwrite testLvalues;
#X obj 35 556 tabwrite testCvalues;
#X obj 125 476 r countId;
#X obj 123 528 r countId;
#X obj 171 573 r countId;
#X obj 22 392 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 87 401 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 145 369 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X msg 607 396 \; testLvalues read textLvalues.txt \; testCvalues read
textCvalues.txt \; testHvalues read textHvalues.txt;
#X floatatom 698 474 5 0 0 0 - - -, f 5;
#X obj 705 547 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 742 475 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 700 510 tabread testCvalues;
#X obj 665 129 table inputRGBvalues;
#X msg 647 181 \; inputRGBvalues read rgbs.txt;
#X obj 225 341 f;
#X obj 256 340 + 1;
#X obj 224 316 t b;
#X obj 225 370 s countId;
#X obj 285 340 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 214 525 s next;
#X obj 198 473 b;
#X obj 259 315 r rest;
#X msg 831 473 set testCvalues;
#X msg 832 495 set testHvalues;
#X msg 831 446 set testLvalues;
#X msg 176 190 255;
#X obj 230 281 s rgb3plet;
#X obj 130 676;
#X obj 210 493 delay 0.001;
#X obj 194 450 spigot;
#X msg 222 419 0;
#X msg 261 416 1;
#X obj 205 399 r done;
#X obj 246 452 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 131 630 L min 0 idx 0 max 100 idx 1.65814e+07 \; C min 0 idx
0 max 133.816 idx 99 \; H min 2.38272e-05 idx 1.0491e+07 max 360 idx
0 \;;
#X text 287 2 kitar para funcionar sem spigot test etc;
#X connect 2 0 3 0;
#X connect 9 0 11 0;
#X connect 9 1 12 0;
#X connect 9 2 39 0;
#X connect 10 0 23 0;
#X connect 10 0 78 0;
#X connect 11 0 0 0;
#X connect 12 0 0 1;
#X connect 17 0 40 0;
#X connect 18 0 17 0;
#X connect 20 0 17 0;
#X connect 23 0 61 0;
#X connect 23 0 91 0;
#X connect 23 1 62 0;
#X connect 23 2 60 0;
#X connect 25 0 32 0;
#X connect 26 0 27 0;
#X connect 26 1 28 0;
#X connect 29 0 30 0;
#X connect 29 1 31 0;
#X connect 32 0 26 0;
#X connect 32 1 29 0;
#X connect 33 0 32 0;
#X connect 34 0 32 0;
#X connect 35 0 22 0;
#X connect 37 0 38 0;
#X connect 38 0 35 0;
#X connect 38 1 93 0;
#X connect 38 2 24 0;
#X connect 38 3 19 0;
#X connect 39 0 0 2;
#X connect 40 0 21 0;
#X connect 41 0 32 0;
#X connect 43 0 39 1;
#X connect 43 0 12 1;
#X connect 43 0 11 1;
#X connect 46 0 45 0;
#X connect 47 0 9 0;
#X connect 48 0 49 0;
#X connect 50 0 9 0;
#X connect 51 0 88 0;
#X connect 52 0 58 0;
#X connect 53 0 59 0;
#X connect 54 0 57 0;
#X connect 55 0 51 0;
#X connect 55 1 51 1;
#X connect 56 0 51 0;
#X connect 56 1 51 2;
#X connect 57 0 51 0;
#X connect 58 0 55 0;
#X connect 59 0 56 0;
#X connect 63 0 61 1;
#X connect 64 0 62 1;
#X connect 65 0 60 1;
#X connect 70 0 73 0;
#X connect 72 0 73 0;
#X connect 73 0 71 0;
#X connect 76 0 77 0;
#X connect 76 0 79 0;
#X connect 77 0 76 1;
#X connect 78 0 76 0;
#X connect 82 0 90 0;
#X connect 83 0 76 0;
#X connect 84 0 73 0;
#X connect 85 0 73 0;
#X connect 86 0 73 0;
#X connect 87 0 39 1;
#X connect 87 0 12 1;
#X connect 87 0 11 1;
#X connect 90 0 81 0;
#X connect 91 0 82 0;
#X connect 92 0 95 0;
#X connect 93 0 95 0;
#X connect 94 0 92 0;
#X connect 95 0 91 1;
